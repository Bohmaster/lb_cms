<% include partials/header.ejs %>
<% include partials/navbar.ejs %>

<div class="container">
	<div class="row">
		<% include partials/sidebar.ejs %>

		<div class="col-md-10">
			<div class="page-header">
				<div class="pull-right">
					<a href="/administrator/detail?model=<%= modelName %>" class="btn btn-lg btn-default" role="button">New</a>
				</div>

				<h1><%= modelName %> <small><%= recordCount %> records</small></h1>
			</div>

			<form action="/administrator/list?model=<%= modelName %>" method="post" role="form" id="toolbar" class="form-inline">
				<!--<div class="form-group">-->
					<!---->
				<!--</div>-->

				<div class="input-group">
					<input value="<%= filters.text %>" name="search" type="search" class="form-control" id="search" placeholder="Search...">

					<div class="input-group-btn">
						<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"
						        tabindex="-1">
							<span class="caret"></span>
							<span id="filterTitle"><%= filters.key  %></span>
						</button>
						<ul id="searchFilter" class="dropdown-menu dropdown-menu-right" role="menu">
							<% for(var i = 0; i < headers.length; i++) { %>
							<li><a><%= headers[i] %></a></li>
							<% } %>
						</ul>
					</div>
				</div>

				<input name="searchFilterValue" type="hidden" id="searchFilterValue" value="<%= filters.key %>" />

				<button type="submit" class="btn btn-default">Search</button>
			</form>

			<hr />

			<table class="table table-hover table-striped">
				<tr>
					<% for(var i = 0; i < headers.length; i++) { %>
						<th><%= headers[i] %></th>
					<% } %>
				</tr>

				<% for(var k = 0; k < data.length; k++) { %>
					<tr>
						<% for(var i = 0; i < headers.length; i++) { %>
							<td><a href="/administrator/detail?model=<%= modelName %>&id=<%= data[k][idField] %>"><%= data[k][headers[i]] %></a></td>
						<% } %>
					</tr>
				<% } %>
			</table>
		</div>
	</div>

	<hr>

	<% include partials/footer.ejs %>
</div>
<!--/.fluid-container-->

<% include partials/scripts.ejs %>

<script type="application/javascript">
	$(document).ready(function () {
		$("#searchFilter li").on("click", function() {
			var text = $(this).text();
			$("#filterTitle").text(text);
			$("#searchFilterValue").attr("value", text);
		});
	});
</script>

<% include partials/end.ejs %>